<template>
  <div class="pl-56px w-200px">
    <div
      id="headerLogo"
      @mouseenter="handleEnter"
      @mouseleave="handleLeave"></div>
  </div>
</template>
<script lang="ts" setup>
function initSvgLogo() {
  const svgStr = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="110" height="53" viewBox="0 0 1140.84 551.268">
  <defs>
    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop id="stopJ1" offset="0%" stop-color="#f1f1f1" />
      <stop id="stopJ2" offset="0%" stop-color="#f1f1f1" />
    </linearGradient>
    <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop id="stopI1" offset="0%" stop-color="#f1f1f1" />
      <stop id="stopI2" offset="0%" stop-color="#f1f1f1" />
    </linearGradient>
   <linearGradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop id="stopAng1" offset="0%" stop-color="#f1f1f1" />
      <stop id="stopAng2" offset="0%" stop-color="#f1f1f1" />
    </linearGradient>
    <linearGradient id="gradient3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop id="stopHh1" offset="1%" stop-color="#f1f1f1" />
      <stop id="stopHh2" offset="0%" stop-color="#f1f1f1" />
    </linearGradient>
  </defs>
    <path d="M6.4979 138.623L5.38602 138.623C4.64479 138.623 3.57953 138.623 2.1903 138.623C0.80113 138.623 0.0721361 138.623 0.00337956 138.623C-0.0654352 138.623 0.913296 138.4 2.93957 137.956C4.96585 137.511 10.1178 135.288 18.3953 131.289C26.6728 127.289 37.0547 118.508 49.5409 104.945C62.0271 91.3831 73.2964 77.6131 83.3489 63.6353C93.4014 49.6575 100.407 38.1051 104.366 28.9781C108.325 19.8512 111.059 13.0135 112.567 8.46509C114.076 3.91679 114.627 1.18051 114.221 0.256264C113.815 -0.667987 113.143 0.907586 112.205 4.98322C111.267 9.05873 109.824 16.4076 107.877 27.0301C105.93 37.6525 103.999 50.3336 102.084 65.0734C100.169 79.8133 99.3013 96.8383 99.4818 116.149C99.6623 135.459 100.149 155.559 100.942 176.448C101.734 197.336 102.839 215.664 104.256 231.431C105.672 247.198 107.228 261.014 108.922 272.88C110.616 284.745 111.978 294.777 113.008 302.973C114.038 311.17 114.66 319.265 114.873 327.259C115.087 335.252 114.649 342.279 113.561 348.338C112.472 354.397 109.523 359.999 104.714 365.144C99.9042 370.29 93.2279 374.418 84.685 377.53C76.142 380.641 66.8829 382.66 56.9076 383.587C46.9323 384.514 38.8194 384.258 32.5689 382.818C26.3184 381.378 22.3427 378.485 20.6419 374.141C18.9411 369.796 19.478 363.701 22.2528 355.857C25.0275 348.013 29.8415 339.13 36.6946 329.209C43.5477 319.288 52.0237 308.382 62.1226 296.491C72.2214 284.6 83.6279 272.67 96.3419 260.7C109.056 248.729 121.788 238.221 134.537 229.174C147.286 220.127 157.843 212.607 166.207 206.614C174.572 200.622 182.289 196.687 189.359 194.809L199.964 191.993" fill="none" stroke="url(#gradient)" stroke-opacity="1.000000" stroke-width="20" stroke-linejoin="round" stroke-linecap="round" stroke-dasharray="0 0" transform="matrix(1 0 0 1 48.6238 49.3123)"/>
    <path d="M36.5149 8.32303L35.959 5.54329C35.5884 3.69024 36.0773 2.04708 37.4257 0.614031C38.7742 -0.819018 41.244 0.25638 44.8351 3.84034C48.4262 7.42431 52.0912 12.2918 55.8301 18.4428C59.5689 24.5939 62.6622 30.4787 65.1099 36.0975C67.5576 41.7163 68.6254 48.129 68.3136 55.3354C68.0017 62.5416 66.3532 70.598 63.3681 79.5046C60.383 88.411 54.8229 97.3736 46.6877 106.392C38.5526 115.411 30.3116 122.29 21.9647 127.028C13.6179 131.766 7.77447 134.276 4.43453 134.556C1.0946 134.836 -0.358699 134.35 0.0746707 133.098C0.508041 131.847 2.0948 129.289 4.83498 125.425C7.57516 121.561 12.455 117.028 19.4746 111.825C26.4942 106.621 33.3974 102.673 40.1842 99.9808C46.971 97.2883 51.6513 97.3682 54.2252 100.221C56.799 103.073 57.2529 110.037 55.5869 121.112C53.9208 132.187 51.2337 145.388 47.5255 160.714C43.8173 176.039 40.5308 187.67 37.6662 195.605C34.8015 203.541 33.1863 208.001 32.8205 208.986C32.4547 209.971 33.5558 209.433 36.1239 207.373C38.6919 205.313 43.4627 201.881 50.4362 197.077C57.4098 192.273 65.0083 187.011 73.2316 181.292C81.455 175.572 90.3632 169.775 99.9563 163.901L114.346 155.09" fill="none" stroke="url(#gradient1)" stroke-opacity="1.000000" stroke-width="20" stroke-linejoin="round" stroke-linecap="round" stroke-dasharray="0 0" transform="matrix(1 0 0 1 232.087 195.178)"/>
    <path d="M69.5446 37.8621L69.5446 37.3062C69.5446 36.9355 69.2975 35.1128 68.8033 31.8379C68.3092 28.5631 67.0223 24.0647 64.9428 18.3427C62.8633 12.6207 59.3223 8.62836 54.3197 6.3658C49.3172 4.10325 43.5671 4.69479 37.0694 8.14031C30.5717 11.5858 24.5983 18.4318 19.1492 28.678C13.7 38.9242 9.07726 49.7237 5.28088 61.0763C1.48447 72.4289 -0.265004 79.8305 0.0324263 83.281C0.329886 86.7317 1.97681 87.2551 4.97322 84.851C7.96964 82.4471 13.8354 78.0406 22.5706 71.6317C31.3058 65.2228 39.9155 56.9729 48.3997 46.8823C56.8838 36.7916 63.8225 27.4617 69.2157 18.8925C74.6089 10.3235 77.8113 4.76028 78.8231 2.20312C79.8348 -0.354154 80.1145 0.143573 79.6622 3.6963C79.2099 7.24903 78.0594 13.5039 76.2108 22.4609C74.3622 31.418 71.781 41.4141 68.4671 52.4493C65.1533 63.4845 63.0899 72.8663 62.2768 80.5946C61.4637 88.323 62.2728 92.0392 64.7041 91.7435C67.1353 91.4477 70.9397 89.9984 76.1173 87.3957C81.2948 84.793 87.0681 79.6698 93.437 72.0262C99.8059 64.3824 105.353 56.7071 110.079 49.0002C114.804 41.2933 118.684 35.0957 121.719 30.4073C124.753 25.7189 127.055 22.2221 128.624 19.9167C130.193 17.6112 131.084 17.255 131.297 18.8479C131.51 20.4408 131.245 23.6519 130.501 28.4809C129.757 33.3099 128.474 40.0147 126.652 48.5954C124.83 57.1761 122.925 65.0651 120.936 72.2625C118.947 79.4599 117.725 84.3181 117.272 86.8368C116.818 89.3555 116.78 90.0849 117.156 89.0252C117.531 87.9656 118.593 85.2415 120.341 80.8533C122.089 76.465 125.515 69.8904 130.618 61.1293C135.722 52.3682 141.3 43.2854 147.351 33.881C153.402 24.4766 158.433 18.0788 162.443 14.6877C166.452 11.2966 169.277 10.4668 170.918 12.1985C172.558 13.9301 173.179 17.5117 172.78 22.9433C172.382 28.375 171.933 35.457 171.433 44.1892C170.933 52.9214 170.794 60.5014 171.016 66.9292C171.239 73.357 172.815 76.7724 175.746 77.1755C178.677 77.5784 184.561 76.4393 193.397 73.758C202.234 71.0768 210.589 66.2573 218.463 59.2997C226.336 52.342 233.624 44.7823 240.327 36.6205C247.029 28.4588 252.317 21.2905 256.189 15.1158C260.061 8.94103 262.469 4.63209 263.413 2.1889C264.357 -0.254283 263.836 -0.652255 261.848 0.995105C259.861 2.64246 256.77 6.46684 252.576 12.4684C248.382 18.4699 243.844 26.9965 238.962 38.0485C234.079 49.1004 231.01 59.7079 229.755 69.8712C228.499 80.0344 229.465 87.1284 232.654 91.1528C235.843 95.1773 240.753 95.991 247.383 93.5937C254.013 91.1964 260.922 86.5073 268.108 79.5265C275.294 72.5456 281.237 64.2626 285.937 54.6779C290.638 45.0931 294.152 36.0813 296.48 27.6428C298.809 19.2043 300.088 13.0072 300.318 9.0515C300.548 5.09579 300.676 3.32082 300.703 3.72672C300.731 4.13262 300.612 5.46906 300.347 7.73581C300.082 10.0027 299.687 14.7279 299.162 21.9114C298.637 29.095 298.394 37.9336 298.434 48.4271C298.474 58.9207 298.927 71.2372 299.792 85.3766C300.657 99.516 302.002 113.37 303.827 126.939C305.653 140.507 306.685 151.474 306.923 159.838C307.162 168.202 306.307 175.674 304.359 182.254C302.411 188.834 297.875 195.062 290.753 200.937C283.631 206.813 274.709 211.337 263.988 214.511C253.267 217.684 243.272 220.038 234.003 221.573C224.735 223.108 217.418 223.408 212.054 222.472C206.689 221.536 203.516 219.177 202.533 215.394C201.551 211.611 203.128 205.441 207.263 196.885C211.398 188.328 218.764 177.212 229.361 163.536C239.958 149.859 253.666 134.758 270.484 118.232C287.302 101.706 305.471 86.6553 324.99 73.0801C344.509 59.5049 361.44 49.6382 375.783 43.4803C390.127 37.3223 401.782 32.762 410.749 29.7994C419.716 26.8368 426.116 24.9232 429.949 24.0586C433.781 23.194 435.485 23.4734 435.06 24.8967C434.634 26.32 433.65 27.7248 432.106 29.1113L429.791 31.1909" fill="none" stroke="url(#gradient2)" stroke-opacity="1.000000" stroke-width="20" stroke-linejoin="round" stroke-linecap="round" stroke-dasharray="0 0" transform="matrix(1 0 0 1 356.941 276.826)"/>
    <path d="M10.8629 18.4423L10.8629 12.6189C10.8629 8.73669 11.1218 5.11963 11.6394 1.76746C12.157 -1.58472 13.3008 -0.168457 15.0706 6.01611C16.8405 12.2008 18.9228 23.8978 21.3175 41.1072C23.7123 58.3167 24.9001 79.3408 24.8809 104.18C24.8618 129.019 24.1414 152.106 22.7197 173.441C21.2981 194.776 18.8579 210.237 15.3992 219.822C11.9406 229.406 8.64392 235.064 5.50937 236.795C2.37482 238.526 0.582764 238.527 0.13324 236.8C-0.316315 235.072 0.371613 230.127 2.19702 221.965C4.02243 213.804 7.18954 202.831 11.6984 189.046C16.2072 175.261 21.4564 163.039 27.4457 152.379C33.4351 141.719 39.9632 134.69 47.0301 131.292C54.097 127.893 60.4602 129.438 66.1198 135.928C71.7793 142.418 76.2351 152.539 79.4871 166.291C82.739 180.043 85.1743 193.475 86.7928 206.588C88.4114 219.7 89.6255 226.917 90.4351 228.238C91.2447 229.559 92.2474 228.506 93.4433 225.079C94.6393 221.652 96.5557 215.457 99.1926 206.495C101.83 197.533 105.188 186.897 109.269 174.589C113.349 162.281 117.129 149.441 120.608 136.07C124.087 122.699 127.043 108.273 129.474 92.7913C131.905 77.3099 134.237 62.8777 136.47 49.4948C138.703 36.1118 140.645 27.3031 142.297 23.0686C143.949 18.8341 145.523 16.9697 147.017 17.4756C148.511 17.9816 149.721 19.9436 150.645 23.3618C151.569 26.7799 152.4 32.6844 153.138 41.0754C153.876 49.4664 154.356 59.0385 154.578 69.7917C154.799 80.545 154.941 93.2676 155.002 107.959C155.063 122.651 154.962 138.594 154.699 155.789C154.435 172.983 154.206 187.929 154.011 200.626C153.816 213.322 153.828 221.376 154.047 224.786C154.266 228.196 154.773 229.307 155.568 228.121C156.362 226.934 157.808 223.454 159.904 217.681C162 211.909 165.092 201.719 169.181 187.112C173.27 172.505 178.164 159.249 183.863 147.344C189.562 135.439 195.24 127.396 200.898 123.214C206.556 119.032 211.761 121.618 216.514 130.971C221.267 140.324 226.286 153.975 231.569 171.924C236.853 189.873 244.322 205.426 253.979 218.581C263.635 231.735 275.174 236.687 288.596 233.434C302.019 230.181 313.825 224.982 324.015 217.836L339.3 207.119" fill="none" stroke="url(#gradient3)" stroke-opacity="1.000000" stroke-width="20" stroke-linejoin="round" stroke-linecap="round" stroke-dasharray="0 0" transform="matrix(1 0 0 1 749.345 154.993)"/>
</svg>
`

  const appEl = document.querySelector('#headerLogo')
  const div = document.createElement('div')
  div.innerHTML = svgStr
  if (appEl) {
    appEl.appendChild(div)
  }
}

const stopFlag = ref(false)
function handleEnter() {
  stopFlag.value = true
}

function handleLeave() {
  stopFlag.value = false
}

const randomColor = ref('#333')
const colorStr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f']
function updateRandomColor() {
  randomColor.value =
    '#' +
    new Array(6)
      .fill('3')
      .map(() => {
        const index = Math.round(Math.random() * 15)
        return colorStr[index]
      })
      .join('')
}

onMounted(() => {
  initSvgLogo()

  let offset = 0
  let isReverse = false
  const STEP = 4

  const stopJ1 = document.getElementById('stopJ1')!
  const stopI1 = document.getElementById('stopI1')!
  const stopAng1 = document.getElementById('stopAng1')!
  const stopHh1 = document.getElementById('stopHh1')!

  function handleAnimate() {
    if (!stopFlag.value) {
      if (isReverse) {
        offset -= STEP
        const childOffset = offset % 101
        if (offset <= 0) {
          isReverse = false
          updateRandomColor()
        } else if (offset <= 100) {
          if (childOffset < STEP) {
            stopJ1.setAttribute('stop-color', '#fff')
          }
          stopJ1.setAttribute('offset', childOffset + '%')
        } else if (offset <= 200) {
          if (childOffset < STEP) {
            stopI1.setAttribute('stop-color', '#fff')
          }
          stopI1.setAttribute('offset', childOffset + '%')
        } else if (offset <= 300) {
          if (childOffset < STEP) {
            stopAng1.setAttribute('stop-color', '#fff')
          }
          stopAng1.setAttribute('offset', childOffset + '%')
        } else if (offset <= 400) {
          stopHh1.setAttribute('offset', childOffset + '%')
          if (childOffset < STEP) {
            stopHh1.setAttribute('stop-color', '#fff')
          }
        } else {
          isReverse = false
          updateRandomColor()
        }
      } else {
        offset += STEP
        const childOffset = offset % 101
        if (offset <= 100) {
          stopJ1.setAttribute('stop-color', randomColor.value)
          stopJ1.setAttribute('offset', childOffset + '%')
        } else if (offset <= 200) {
          stopI1.setAttribute('stop-color', randomColor.value)
          stopI1.setAttribute('offset', childOffset + '%')
        } else if (offset <= 300) {
          stopAng1.setAttribute('stop-color', randomColor.value)
          stopAng1.setAttribute('offset', childOffset + '%')
        } else if (offset <= 400) {
          stopHh1.setAttribute('stop-color', randomColor.value)
          stopHh1.setAttribute('offset', childOffset + '%')
        } else {
          isReverse = true
        }
      }
    }

    requestAnimationFrame(handleAnimate)
  }

  requestAnimationFrame(handleAnimate)
})
</script>
